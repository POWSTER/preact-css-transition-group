!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("preact")):"function"==typeof define&&define.amd?define(["preact"],t):n.PreactCSSTransitionGroup=t(n.preact)}(this,function(n){"use strict";function t(n){return n.attributes&&n.attributes.key}function e(n){return n.base}function r(n){return n&&n[0]}function i(n,t){for(var e=n.length;e--;)if(t(n[e]))return!0;return!1}function o(n,e){return i(n,function(n){return t(n)===e})}function s(n,e){return o(n,t(e))}function a(n,e,r){return i(n,function(n){return t(n)===e&&n.props[r]})}function u(n,e,r){return a(n,t(e),r)}function c(n,e){var r=[],i={},s=[];return n.forEach(function(n){var r=t(n);o(e,r)?s.length&&(i[r]=s,s=[]):s.push(n)}),e.forEach(function(n){var e=t(n);i.hasOwnProperty(e)&&(r=r.concat(i[e])),r.push(n)}),r.concat(s)}function p(n,t){n.classList?n.classList.add(t):n.className+=" "+t}function l(n,t){if(t=t.trim(),n.classList)n.classList.remove(t);else{var e=n.className.trim(),r=y(e);for(t=m+t+m;r.indexOf(t)>=0;)r=r.replace(t,m);n.className=r.trim()}}function f(){var n=document.createElement("div"),t=n.style;"AnimationEvent"in window||delete E.animationend.animation,"TransitionEvent"in window||delete E.transitionend.transition;for(var e in E){var r=E[e];for(var i in r)if(i in t){T.push(r[i]);break}}}function h(n,t){return T.length?void T.forEach(function(e){n.addEventListener(e,t,!1)}):window.setTimeout(t,0)}function d(n,t){T.length&&T.forEach(function(e){n.removeEventListener(e,t,!1)})}var m=" ",v=/[\n\t\r]+/g,y=function(n){return(m+n+m).replace(v,m)},E={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},T=[];"undefined"!=typeof window&&f();var w=(function(){function n(n){this.value=n}function t(t){function e(n,t){return new Promise(function(e,i){var a={key:n,arg:t,resolve:e,reject:i,next:null};s?s=s.next=a:(o=s=a,r(n,t))})}function r(e,o){try{var s=t[e](o),a=s.value;a instanceof n?Promise.resolve(a.value).then(function(n){r("next",n)},function(n){r("throw",n)}):i(s.done?"return":"normal",s.value)}catch(n){i("throw",n)}}function i(n,t){switch(n){case"return":o.resolve({value:t,done:!0});break;case"throw":o.reject(t);break;default:o.resolve({value:t,done:!1})}o=o.next,o?r(o.key,o.arg):s=null}var o,s;this._invoke=e,"function"!=typeof t.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(n){return this._invoke("next",n)},t.prototype.throw=function(n){return this._invoke("throw",n)},t.prototype.return=function(n){return this._invoke("return",n)},{wrap:function(n){return function(){return new t(n.apply(this,arguments))}},await:function(t){return new n(t)}}}(),function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}),L=function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)},g=function(n,t){var e={};for(var r in n)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},b=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t},k=17,_=function(n){function t(){var r,i,o;w(this,t);for(var s=arguments.length,a=Array(s),u=0;u<s;u++)a[u]=arguments[u];return r=i=b(this,n.call.apply(n,[this].concat(a))),i.flushClassNameQueue=function(){e(i)&&p(e(i),i.classNameQueue.join(" ")),i.classNameQueue.length=0,i.timeout=null},o=r,b(i,o)}return L(t,n),t.prototype.transition=function(n,t){var r=this,i=e(this),o=this.props.name+"-"+n,s=o+"-active";this.endListener&&this.endListener(),this.endListener=function(n){n&&n.target!==i||(l(i,o),l(i,s),d(i,r.endListener),r.endListener=null,t&&t())},h(i,this.endListener),p(i,o),this.queueClass(s)},t.prototype.queueClass=function(n){this.classNameQueue.push(n),this.timeout||(this.timeout=setTimeout(this.flushClassNameQueue,k))},t.prototype.stop=function(){this.timeout&&(clearTimeout(this.timeout),this.classNameQueue.length=0,this.timeout=null),this.endListener&&this.endListener()},t.prototype.componentWillMount=function(){this.classNameQueue=[]},t.prototype.componentWillUnmount=function(){this.timeout&&clearTimeout(this.timeout)},t.prototype.componentWillEnter=function(n){this.props.enter?this.transition("enter",n):n()},t.prototype.componentWillLeave=function(n){this.props.leave?this.transition("leave",n):n()},t.prototype.render=function(){return r(this.props.children)},t}(n.Component),N=function(e){function r(i){w(this,r);var o=b(this,e.call(this));return o.renderChild=function(e){var r=o.props,i=r.transitionName,s=r.transitionEnter,a=r.transitionLeave,u=t(e);return n.h(_,{key:u,ref:function(n){(o.refs[u]=n)||(e=null)},name:i,enter:s,leave:a},e)},o.refs={},o.state={children:(i.children||[]).slice()},o}return L(r,e),r.prototype.shouldComponentUpdate=function(n,t){var e=t.children;return e!==this.state.children},r.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},r.prototype.componentWillReceiveProps=function(e){var r=this,i=e.children,o=e.exclusive,a=e.showProp,p=(i||[]).slice(),l=o?this.props.children:this.state.children,f=c(l,p);a&&(f=f.map(function(t){if(!t.props[a]&&u(l,t,a)){var e;t=n.cloneElement(t,(e={},e[a]=!0,e))}return t})),o&&f.forEach(function(n){return r.stop(t(n))}),this.setState({children:f}),this.forceUpdate(),p.forEach(function(n){var e=t(n),i=l&&s(l,n);if(a){if(i){var o=u(l,n,a),c=n.props[a];o||!c||r.currentlyTransitioningKeys[e]||r.keysToEnter.push(e)}}else i||r.currentlyTransitioningKeys[e]||r.keysToEnter.push(e)}),l.forEach(function(n){var e=t(n),i=p&&s(p,n);if(a){if(i){var o=u(p,n,a),c=n.props[a];o||!c||r.currentlyTransitioningKeys[e]||r.keysToLeave.push(e)}}else i||r.currentlyTransitioningKeys[e]||r.keysToLeave.push(e)})},r.prototype.performEnter=function(n){var t=this;this.currentlyTransitioningKeys[n]=!0;var e=this.refs[n];e.componentWillEnter?e.componentWillEnter(function(){return t._handleDoneEntering(n)}):this._handleDoneEntering(n)},r.prototype._handleDoneEntering=function(n){delete this.currentlyTransitioningKeys[n];var t=this.props.children,e=this.props.showProp;!t||!e&&!o(t,n)||e&&!a(t,n,e)?this.performLeave(n):this.setState({children:t})},r.prototype.stop=function(n){delete this.currentlyTransitioningKeys[n];var t=this.refs[n];t&&t.stop()},r.prototype.performLeave=function(n){var t=this;this.currentlyTransitioningKeys[n]=!0;var e=this.refs[n];e&&e.componentWillLeave?e.componentWillLeave(function(){return t._handleDoneLeaving(n)}):this._handleDoneLeaving(n)},r.prototype._handleDoneLeaving=function(n){delete this.currentlyTransitioningKeys[n];var t=this.props.showProp,e=this.props.children;t&&e&&a(e,n,t)?this.performEnter(n):!t&&e&&o(e,n)?this.performEnter(n):this.setState({children:e})},r.prototype.componentDidUpdate=function(){var n=this,t=this.keysToEnter,e=this.keysToLeave;this.keysToEnter=[],t.forEach(function(t){return n.performEnter(t)}),this.keysToLeave=[],e.forEach(function(t){return n.performLeave(t)})},r.prototype.render=function(t,e){var r=t.component,i=(t.transitionName,t.transitionEnter,t.transitionLeave,t.children,g(t,["component","transitionName","transitionEnter","transitionLeave","children"])),o=e.children;return n.h(r,i,o.map(this.renderChild))},r}(n.Component);return N.defaultProps={component:"span",transitionEnter:!0,transitionLeave:!0},N});
//# sourceMappingURL=preact-css-transition-group.min.js.map